L.BasemapControl=L.Control.extend({options:{position:"bottomleft",layers:[]},onAdd:function(t){this._map=t,this._currentIndex=0;var e=L.DomUtil.create("div","leaflet-control-basemap");return this._img=L.DomUtil.create("div","basemap-img",e),this._switchMap=L.map(e,{zoomControl:!1,attributionControl:!1,minZoom:this._map.getMinZoom()-3,maxZoom:this._map.getMaxZoom()-3,crs:this._map.options.crs,dragging:!1,touchZoom:!1,doubleClickZoom:!1,scrollWheelZoom:!1}),this._switchLayer=L.tileLayer(this.options.layers[this._currentIndex].layer._url,{attribution:this.options.layers[this._currentIndex].layer.options.attribution}).addTo(this._switchMap),this._setLayer(this.options.layers[this._currentIndex].layer),L.DomEvent.on(this._img,"click",this._nextLayer,this),this._map.on("moveend zoomend",this._updatePreview,this),this._initializePreview(),e},_initializePreview:function(){setTimeout((()=>{this._updatePreview()}),100)},_setLayer:function(t){this._currentLayer&&this._map.removeLayer(this._currentLayer),this._currentLayer=t.addTo(this._map)},_nextLayer:function(){this._currentIndex=(this._currentIndex+1)%this.options.layers.length,this._setLayer(this.options.layers[this._currentIndex].layer),this._updatePreview(),this._map.fire("basemapChange",{layer:this.options.layers[this._currentIndex].layer})},_updatePreview:function(){var t=this._map.getCenter(),e=this._map.getZoom();this._switchMap.setView(t,e-4);var i=(this._currentIndex+1)%this.options.layers.length,s=this.options.layers[i].layer._url.replace("{s}","a");this._switchLayer.setUrl(s),this._switchLayer.once("load",(()=>{this._img.style.backgroundImage=`url(${s})`,this._img.classList.remove("loading")})),this._switchLayer.once("error",(()=>{this._img.classList.add("loading")}))},changeBasemap:function(t){t>=0&&t<this.options.layers.length&&(this._currentIndex=t,this._setLayer(this.options.layers[this._currentIndex].layer),this._updatePreview())}}),L.basemapControl=function(t){return new L.BasemapControl(t)};